@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
 * Design Tokens - CSS Custom Properties
 * ============================================ */
@layer base {
  :root {
    /* --- Brand Colors --- */
    --color-brand: #d97706; /* amber-600 */
    --color-brand-light: #fde68a; /* amber-200 */
    --color-brand-dark: #78350f; /* amber-900 */
    --color-brand-accent: #f59e0b; /* amber-500 */
    --color-brand-fg: #92400e; /* amber-800 */

    /* --- Action Colors --- */
    --color-action-primary: #2563eb; /* blue-600 */
    --color-action-primary-hover: #1d4ed8; /* blue-700 */
    --color-action-primary-fg: #ffffff;
    --color-action-danger: #dc2626; /* red-600 */
    --color-action-danger-hover: #b91c1c; /* red-700 */
    --color-action-danger-fg: #ffffff;
    --color-action-danger-light: #fef2f2; /* red-50 */
    --color-action-success: #16a34a; /* green-600 */
    --color-action-success-fg: #ffffff;

    /* --- Surface Colors --- */
    --color-surface-primary: #ffffff;
    --color-surface-secondary: #f9fafb; /* gray-50 */
    --color-surface-elevated: #ffffff;
    --color-surface-overlay: rgba(0, 0, 0, 0.1);

    /* --- Border Colors --- */
    --color-border-default: #e5e7eb; /* gray-200 */
    --color-border-strong: #d1d5db; /* gray-300 */
    --color-border-focus: #2563eb; /* blue-600 */

    /* --- Foreground (Text) Colors --- */
    --color-fg-default: #111827; /* gray-900 */
    --color-fg-secondary: #4b5563; /* gray-600 */
    --color-fg-muted: #6b7280; /* gray-500 */
    --color-fg-disabled: #9ca3af; /* gray-400 */
    --color-fg-inverse: #ffffff;
    --color-fg-link: #2563eb; /* blue-600 */

    /* --- Feedback Colors --- */
    --color-feedback-error: #dc2626; /* red-600 */
    --color-feedback-error-bg: #fef2f2; /* red-50 */
    --color-feedback-error-border: #fecaca; /* red-200 */
    --color-feedback-success: #16a34a; /* green-600 */
    --color-feedback-success-bg: #f0fdf4; /* green-50 */
    --color-feedback-success-border: #bbf7d0; /* green-200 */
    --color-feedback-warning: #d97706; /* amber-600 */
    --color-feedback-warning-bg: #fffbeb; /* amber-50 */
    --color-feedback-warning-border: #fde68a; /* amber-200 */
    --color-feedback-info: #2563eb; /* blue-600 */
    --color-feedback-info-bg: #eff6ff; /* blue-50 */
    --color-feedback-info-border: #bfdbfe; /* blue-200 */

    /* --- Border Radius Tokens --- */
    --radius-btn: 0.5rem; /* 8px - rounded-lg */
    --radius-input: 0.5rem; /* 8px - rounded-lg */
    --radius-card: 0.75rem; /* 12px - rounded-xl */
    --radius-card-lg: 1rem; /* 16px - rounded-2xl */
    --radius-modal: 1.5rem; /* 24px - rounded-3xl */

    /* --- Spacing Tokens --- */
    --spacing-page: 1.5rem; /* 24px */
    --spacing-section: 1.5rem; /* 24px */
    --spacing-card: 1rem; /* 16px */
    --spacing-card-lg: 1.5rem; /* 24px */
  }

  /* ============================================
   * Dark Theme
   * ============================================ */
  :root[data-theme='dark'] {
    /* --- Brand Colors --- */
    --color-brand: #f59e0b; /* amber-500 */
    --color-brand-light: #78350f; /* amber-900 */
    --color-brand-dark: #fde68a; /* amber-200 */
    --color-brand-accent: #fbbf24; /* amber-400 */
    --color-brand-fg: #fde68a; /* amber-200 */

    /* --- Action Colors --- */
    --color-action-primary: #3b82f6; /* blue-500 */
    --color-action-primary-hover: #60a5fa; /* blue-400 */
    --color-action-primary-fg: #ffffff;
    --color-action-danger: #ef4444; /* red-500 */
    --color-action-danger-hover: #f87171; /* red-400 */
    --color-action-danger-fg: #ffffff;
    --color-action-danger-light: rgba(239, 68, 68, 0.15);
    --color-action-success: #22c55e; /* green-500 */
    --color-action-success-fg: #ffffff;

    /* --- Surface Colors --- */
    --color-surface-primary: #0f172a; /* slate-900 */
    --color-surface-secondary: #1e293b; /* slate-800 */
    --color-surface-elevated: #1e293b; /* slate-800 */
    --color-surface-overlay: rgba(0, 0, 0, 0.6);

    /* --- Border Colors --- */
    --color-border-default: #334155; /* slate-700 */
    --color-border-strong: #475569; /* slate-600 */
    --color-border-focus: #3b82f6; /* blue-500 */

    /* --- Foreground (Text) Colors --- */
    --color-fg-default: #f1f5f9; /* slate-100 */
    --color-fg-secondary: #cbd5e1; /* slate-300 */
    --color-fg-muted: #94a3b8; /* slate-400 */
    --color-fg-disabled: #64748b; /* slate-500 */
    --color-fg-inverse: #0f172a; /* slate-900 */
    --color-fg-link: #60a5fa; /* blue-400 */

    /* --- Feedback Colors --- */
    --color-feedback-error: #f87171; /* red-400 */
    --color-feedback-error-bg: rgba(239, 68, 68, 0.15);
    --color-feedback-error-border: rgba(239, 68, 68, 0.3);
    --color-feedback-success: #4ade80; /* green-400 */
    --color-feedback-success-bg: rgba(34, 197, 94, 0.15);
    --color-feedback-success-border: rgba(34, 197, 94, 0.3);
    --color-feedback-warning: #fbbf24; /* amber-400 */
    --color-feedback-warning-bg: rgba(245, 158, 11, 0.15);
    --color-feedback-warning-border: rgba(245, 158, 11, 0.3);
    --color-feedback-info: #60a5fa; /* blue-400 */
    --color-feedback-info-bg: rgba(59, 130, 246, 0.15);
    --color-feedback-info-border: rgba(59, 130, 246, 0.3);
  }

  body {
    background-color: var(--color-surface-primary);
    color: var(--color-fg-default);
    @apply font-sans antialiased;
  }

  #root {
    @apply min-h-screen;
  }
}

/* ============================================
 * Component Layer - Shared Styles
 * ============================================ */
@layer components {
  .chat-container {
    @apply w-full flex flex-col;
    background-color: var(--color-surface-primary);
    height: 100vh;
    height: 100dvh;
  }

  /* Markdown content styles */
  .markdown-content {
    color: var(--color-fg-default);
  }

  .markdown-content h1,
  .markdown-content h2,
  .markdown-content h3,
  .markdown-content h4,
  .markdown-content h5,
  .markdown-content h6 {
    @apply font-semibold mt-4 mb-2;
    color: var(--color-fg-default);
  }

  .markdown-content h1 {
    @apply text-xl;
  }

  .markdown-content h2 {
    @apply text-lg;
  }

  .markdown-content h3 {
    @apply text-base;
  }

  .markdown-content p {
    @apply mb-3 leading-relaxed;
  }

  .markdown-content ul,
  .markdown-content ol {
    @apply mb-3 pl-6;
  }

  .markdown-content li {
    @apply mb-1;
  }

  .markdown-content ul li {
    @apply list-disc;
  }

  .markdown-content ol li {
    @apply list-decimal;
  }

  .markdown-content strong {
    @apply font-semibold;
  }

  .markdown-content em {
    @apply italic;
  }

  .markdown-content a {
    color: var(--color-fg-link);
  }

  .markdown-content a:hover {
    text-decoration: underline;
  }

  .markdown-content hr {
    @apply my-4;
    border-color: var(--color-border-default);
  }

  .markdown-content pre {
    @apply my-4 rounded-lg overflow-x-auto;
  }

  /* KaTeX math styles */
  .markdown-content .katex-display {
    overflow-x: auto;
    overflow-y: hidden;
    max-width: 100%;
    padding: 0.5rem 0;
    margin: 1rem 0;
  }

  .markdown-content .katex-display > .katex {
    white-space: nowrap;
    display: inline-block;
  }

  .markdown-content .katex {
    font-size: 1em;
    max-width: 100%;
  }

  .markdown-content .katex-html {
    max-width: 100%;
    overflow: visible;
  }

  .markdown-content .katex svg {
    max-width: 100%;
    height: auto;
  }

  .markdown-content .katex .mord {
    white-space: nowrap;
  }

  .markdown-content .katex-mathml {
    display: none !important;
  }

  .markdown-content .katex .sr-only {
    display: none !important;
  }

  .markdown-content .katex-html {
    display: inline !important;
  }

  .markdown-content .katex .arraycolsep {
    width: 0.5em;
  }

  .markdown-content .katex .mtable {
    display: inline-table;
    vertical-align: middle;
  }

  .markdown-content .katex .mtd {
    text-align: center;
    padding: 0.2em 0.4em;
  }

  .markdown-content .katex .mtr {
    display: table-row;
  }

  .markdown-content .katex .left-right {
    display: inline-block;
    vertical-align: middle;
  }

  .markdown-content .katex + .katex-fallback {
    display: none;
  }

  /* Tool component animations */
  .tool-use-block {
    @apply animate-fade-in;
  }

  .tool-result-block {
    @apply animate-fade-in;
  }

  /* ============================================
   * Legacy classes - To be removed after migration
   * ============================================ */
  .message-bubble {
    @apply max-w-full p-4 rounded-2xl;
  }

  .message-user {
    @apply ml-auto;
    background-color: var(--color-surface-primary);
    color: var(--color-fg-default);
  }

  .message-assistant {
    background-color: var(--color-surface-primary);
    color: var(--color-fg-default);
  }

  .input-field {
    @apply w-full px-4 py-3 focus:outline-none focus:ring-2 focus:border-transparent resize-none;
    border: 1px solid var(--color-border-default);
    border-radius: var(--radius-input);
  }

  .input-field:focus {
    --tw-ring-color: var(--color-border-focus);
  }

  .button-primary {
    @apply px-6 py-2 bg-gray-900 text-white hover:bg-gray-800 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-300;
    border-radius: var(--radius-btn);
  }

  .button-secondary {
    @apply px-6 py-2 bg-gray-100 text-gray-900 hover:bg-gray-200 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-300;
    border-radius: var(--radius-btn);
  }
}

@layer utilities {
  /* Mobile responsive utilities */
  @media (max-width: 768px) {
    .tool-use-block,
    .tool-result-block {
      @apply mx-1;
    }
  }
}
